package hvv_admin.dialogs;

import hvv_admin.HVV_Admin;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import org.apache.log4j.Logger;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author yaroslav
 */
public class DlgPendingStart extends javax.swing.JDialog {

    static Logger logger = Logger.getLogger(DlgPendingStart.class);
    final private HVV_Admin theApp;
    
    private int m_nStep;
    public boolean m_bOk;
    
    /**
     * Creates new form TechProcessStep2_1_Dlg
     */
    public DlgPendingStart( HVV_Admin app, java.awt.Frame parent, boolean modal, int nStep) {
        super( app.m_pMainWnd, modal);
        theApp = app;
        initComponents();
        
        m_nStep = nStep;
        lblStepTitle.setText( theApp.GetStepNameWithNum( nStep));
        m_bOk = false;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblWelcome = new javax.swing.JLabel();
        lblStepTitle = new javax.swing.JLabel();
        chkAutoStart = new javax.swing.JCheckBox();
        spnDay = new javax.swing.JSpinner();
        lblDtDelim1 = new javax.swing.JLabel();
        spnMon = new javax.swing.JSpinner();
        lblDtDelim = new javax.swing.JLabel();
        spnYear = new javax.swing.JSpinner();
        spnHou = new javax.swing.JSpinner();
        lblTmDelim = new javax.swing.JLabel();
        spnMin = new javax.swing.JSpinner();
        btnSave = new javax.swing.JButton();
        btnCancel = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Планировщик этапа");
        setMaximumSize(new java.awt.Dimension(450, 240));
        setMinimumSize(new java.awt.Dimension(450, 240));
        setModalExclusionType(java.awt.Dialog.ModalExclusionType.APPLICATION_EXCLUDE);
        setResizable(false);
        getContentPane().setLayout(null);

        lblWelcome.setText("Время автозапуска для этапа");
        getContentPane().add(lblWelcome);
        lblWelcome.setBounds(10, 10, 430, 20);

        lblStepTitle.setFont(new java.awt.Font("Cantarell", 2, 15)); // NOI18N
        lblStepTitle.setText("1.1 Заполнение рабочей камеры азотом");
        lblStepTitle.setToolTipText("");
        getContentPane().add(lblStepTitle);
        lblStepTitle.setBounds(50, 40, 400, 20);

        chkAutoStart.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chkAutoStartActionPerformed(evt);
            }
        });
        getContentPane().add(chkAutoStart);
        chkAutoStart.setBounds(10, 100, 20, 22);

        spnDay.setFont(new java.awt.Font("Cantarell", 0, 24)); // NOI18N
        spnDay.setModel(new javax.swing.SpinnerNumberModel(1, 1, 31, 1));
        spnDay.setEnabled(false);
        getContentPane().add(spnDay);
        spnDay.setBounds(40, 80, 60, 60);

        lblDtDelim1.setFont(new java.awt.Font("Cantarell", 1, 15)); // NOI18N
        lblDtDelim1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblDtDelim1.setText(".");
        getContentPane().add(lblDtDelim1);
        lblDtDelim1.setBounds(100, 100, 10, 40);

        spnMon.setFont(new java.awt.Font("Cantarell", 0, 24)); // NOI18N
        spnMon.setModel(new javax.swing.SpinnerNumberModel(1, 1, 12, 1));
        spnMon.setToolTipText("");
        spnMon.setEnabled(false);
        getContentPane().add(spnMon);
        spnMon.setBounds(110, 80, 60, 60);

        lblDtDelim.setFont(new java.awt.Font("Cantarell", 1, 15)); // NOI18N
        lblDtDelim.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblDtDelim.setText(".");
        getContentPane().add(lblDtDelim);
        lblDtDelim.setBounds(170, 100, 10, 40);

        spnYear.setFont(new java.awt.Font("Cantarell", 0, 24)); // NOI18N
        spnYear.setModel(new javax.swing.SpinnerNumberModel(Integer.valueOf(2017), Integer.valueOf(2017), null, Integer.valueOf(1)));
        spnYear.setEnabled(false);
        getContentPane().add(spnYear);
        spnYear.setBounds(180, 80, 100, 60);

        spnHou.setFont(new java.awt.Font("Cantarell", 0, 24)); // NOI18N
        spnHou.setModel(new javax.swing.SpinnerNumberModel(0, 0, 23, 1));
        spnHou.setEnabled(false);
        getContentPane().add(spnHou);
        spnHou.setBounds(310, 80, 60, 60);

        lblTmDelim.setFont(new java.awt.Font("Cantarell", 1, 15)); // NOI18N
        lblTmDelim.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTmDelim.setText(":");
        getContentPane().add(lblTmDelim);
        lblTmDelim.setBounds(370, 80, 10, 60);

        spnMin.setFont(new java.awt.Font("Cantarell", 0, 24)); // NOI18N
        spnMin.setModel(new javax.swing.SpinnerNumberModel(0, 0, 59, 1));
        spnMin.setEnabled(false);
        getContentPane().add(spnMin);
        spnMin.setBounds(380, 80, 60, 60);

        btnSave.setText("Сохранить");
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });
        getContentPane().add(btnSave);
        btnSave.setBounds(190, 150, 120, 40);

        btnCancel.setText("Отмена");
        btnCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelActionPerformed(evt);
            }
        });
        getContentPane().add(btnCancel);
        btnCancel.setBounds(320, 150, 120, 40);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveActionPerformed
        m_bOk = true;
        dispose();
    }//GEN-LAST:event_btnSaveActionPerformed

    
    
    private void btnCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelActionPerformed
        dispose();
    }//GEN-LAST:event_btnCancelActionPerformed

    private void chkAutoStartActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chkAutoStartActionPerformed
        spnDay.setEnabled(  chkAutoStart.isSelected());
        spnMon.setEnabled(  chkAutoStart.isSelected());
        spnYear.setEnabled( chkAutoStart.isSelected());
        spnHou.setEnabled(  chkAutoStart.isSelected());
        spnMin.setEnabled(  chkAutoStart.isSelected());
    }//GEN-LAST:event_chkAutoStartActionPerformed

    public void init( boolean bAllowed, Date dt) {
        chkAutoStart.setSelected( bAllowed);
        
        spnDay.setEnabled(  bAllowed);
        spnMon.setEnabled(  bAllowed);
        spnYear.setEnabled( bAllowed);
        spnHou.setEnabled(  bAllowed);
        spnMin.setEnabled(  bAllowed);
        
        GregorianCalendar gclndr = new GregorianCalendar();
        gclndr.setTime( dt);
        
        spnDay.setValue( gclndr.get( Calendar.DAY_OF_MONTH));
        spnMon.setValue( gclndr.get( Calendar.MONTH) + 1);
        spnYear.setValue( gclndr.get( Calendar.YEAR));
        
        spnHou.setValue( gclndr.get( Calendar.HOUR_OF_DAY));
        spnMin.setValue( gclndr.get( Calendar.MINUTE));
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("GTK+".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(DlgPendingStart.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(DlgPendingStart.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(DlgPendingStart.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(DlgPendingStart.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        
        /* Create and display the dialog */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                DlgPendingStart dialog = new DlgPendingStart( null, new javax.swing.JFrame(), true, 2);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCancel;
    private javax.swing.JButton btnSave;
    public javax.swing.JCheckBox chkAutoStart;
    public javax.swing.JLabel lblDtDelim;
    public javax.swing.JLabel lblDtDelim1;
    private javax.swing.JLabel lblStepTitle;
    public javax.swing.JLabel lblTmDelim;
    private javax.swing.JLabel lblWelcome;
    public javax.swing.JSpinner spnDay;
    public javax.swing.JSpinner spnHou;
    public javax.swing.JSpinner spnMin;
    public javax.swing.JSpinner spnMon;
    public javax.swing.JSpinner spnYear;
    // End of variables declaration//GEN-END:variables
}
